<!DOCTYPE html><html lang="zh-CM" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>计组部分期末 | Enl_Z's Blog</title><meta name="author" content="Enl_Z"><meta name="copyright" content="Enl_Z"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="[TOC]  ISAHow to Improve the CPU Reduce the number of instructions Make instructions that do more(CSIC) Use better compiler   Use less cycles to perform the instruction Simpler instructions(RISC) Use">
<meta property="og:type" content="article">
<meta property="og:title" content="计组部分期末">
<meta property="og:url" content="http://enl-z.github.io/2023/01/06/%E6%9C%9F%E6%9C%AB/index.html">
<meta property="og:site_name" content="Enl_Z&#39;s Blog">
<meta property="og:description" content="[TOC]  ISAHow to Improve the CPU Reduce the number of instructions Make instructions that do more(CSIC) Use better compiler   Use less cycles to perform the instruction Simpler instructions(RISC) Use">
<meta property="og:locale" content="zh_CM">
<meta property="og:image" content="https://od.lk/s/NjZfNDIyNzE0MTVf/jhk-1659446298147.png">
<meta property="article:published_time" content="2023-01-06T09:55:31.119Z">
<meta property="article:modified_time" content="2023-01-06T09:57:19.702Z">
<meta property="article:author" content="Enl_Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://od.lk/s/NjZfNDIyNzE0MTVf/jhk-1659446298147.png"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="http://enl-z.github.io/2023/01/06/%E6%9C%9F%E6%9C%AB/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":150},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":500,"languages":{"author":"Author: Enl_Z","link":"Link: ","source":"Source: Enl_Z's Blog","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计组部分期末',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-01-06 17:57:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2022/08/02/MpuXm1wTiZ5J9Nv.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://od.lk/s/NjZfNDIyNzE0MTVf/jhk-1659446298147.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Enl_Z's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计组部分期末</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-01-06T09:55:31.119Z" title="Created 2023-01-06 17:55:31">2023-01-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-01-06T09:57:19.702Z" title="Updated 2023-01-06 17:57:19">2023-01-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Memory/">Memory</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Memory/%E5%A4%A7%E4%BA%8C%E7%A7%8B%E5%86%AC/">大二秋冬</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">2.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>13min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计组部分期末"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>[TOC]</p>
<hr>
<h1 id="ISA"><a href="#ISA" class="headerlink" title="ISA"></a>ISA</h1><h2 id="How-to-Improve-the-CPU"><a href="#How-to-Improve-the-CPU" class="headerlink" title="How to Improve the CPU"></a>How to Improve the CPU</h2><ul>
<li>Reduce the number of instructions<ul>
<li>Make instructions that do more(CSIC)</li>
<li>Use better compiler</li>
</ul>
</li>
<li>Use less cycles to perform the instruction<ul>
<li>Simpler instructions(RISC)</li>
<li>Use multiple units&#x2F;ALUs&#x2F;cores in parallel</li>
</ul>
</li>
<li>Increase the clock frequency<ul>
<li>Find a newer technology to manufacture</li>
<li>Redesign time critical components</li>
<li>Adopt multi-cycle</li>
</ul>
</li>
</ul>
<h2 id="ISA-Classification-Basis"><a href="#ISA-Classification-Basis" class="headerlink" title="ISA Classification Basis"></a>ISA Classification Basis</h2><h3 id="ISA-Classes"><a href="#ISA-Classes" class="headerlink" title="ISA Classes"></a>ISA Classes</h3><ul>
<li>按照CPU<u>内部</u>的存储分类，ISA可以分为三种<ol>
<li>基于栈（栈结构 | Stack architecture）</li>
<li>基于累加器（累加器结构 | Accumulator architecture）</li>
<li>基于寄存器（通用寄存器 | General-purpose register architecture | GPR)</li>
</ol>
</li>
</ul>
<h3 id="Stack-Architecture"><a href="#Stack-Architecture" class="headerlink" title="Stack Architecture"></a>Stack Architecture</h3><ul>
<li>Implicit Operands——On the Top of the Stack(TOS)</li>
<li>First operand removed from second op replaced by the result</li>
<li>C &#x3D; A + B(memory locations)<ul>
<li>Push A    	</li>
<li>Push B    	</li>
<li>Add</li>
<li>Pop C</li>
</ul>
</li>
</ul>
<center class="half">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061529786.png" width="200" height="325">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061550302.png" width="200" height="325">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061553982.png" width="200" height="325">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061554793.png" width="200" height="325">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061555028.png" width="200" height="325">
</center>

<h3 id="Accumulator-Architecture"><a href="#Accumulator-Architecture" class="headerlink" title="Accumulator Architecture"></a>Accumulator Architecture</h3><ul>
<li><p>One implicit operand: the accumulator</p>
<p>one explicit operand: mem location</p>
</li>
<li><p>Accumulator is both an implicit input operand and a result</p>
</li>
<li><p>C &#x3D; A + B</p>
<p>Load A</p>
<p>Add B</p>
<p>Store C</p>
</li>
</ul>
<center class="half">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061600349.png" width="200" height="350">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061601619.png" width="200" height="350">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061601884.png" width="200" height="350">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061601545.png" width="200" height="350">
</center>

<h3 id="GPR-Arthitecture"><a href="#GPR-Arthitecture" class="headerlink" title="GPR Arthitecture"></a>GPR Arthitecture</h3><ul>
<li><p>Only explicit operands</p>
<ul>
<li>registers</li>
<li>memory locations</li>
</ul>
</li>
<li><p>Operand access:</p>
<ul>
<li>direct memory access</li>
<li>loaded into temporary storage first</li>
</ul>
</li>
<li><p>Two Classes：</p>
<ul>
<li><p>Register-memory architecture</p>
<blockquote>
<p>any instruction can access memory</p>
</blockquote>
</li>
<li><p>Load-store architecture</p>
<blockquote>
<p>only load and store instructions can access memory</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="GPR-Register-Memory-Arch"><a href="#GPR-Register-Memory-Arch" class="headerlink" title="GPR: Register-Memory Arch"></a>GPR: Register-Memory Arch</h3><ul>
<li>Register-memory architecture(any instruction can access memory)</li>
<li>C &#x3D; A + B<ul>
<li>Load R1, A</li>
<li>Add R3, R1, B</li>
<li>Store R3, C</li>
</ul>
</li>
</ul>
<center class="half">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061654274.png" width="200" height="350">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061655127.png" width="200" height="350">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061655935.png" width="200" height="350">
</center>

<h3 id="GPR-Load-Store-Architecture"><a href="#GPR-Load-Store-Architecture" class="headerlink" title="GPR: Load-Store Architecture"></a>GPR: Load-Store Architecture</h3><ul>
<li>Load-Store Architecture(only load and store instructions can access memory)</li>
<li>C &#x3D; A + B<ul>
<li>Load R1, A</li>
<li>Load R2, B</li>
<li>Add R3, R1, R2</li>
<li>Store R3, C</li>
</ul>
</li>
</ul>
<center class="half">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061658992.png" width="200" height="325">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061658304.png" width="200" height="325">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061658863.png" width="200" height="325">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061659560.png" width="200" height="325">
    <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061659503.png" width="200" height="325">
</center>

<h3 id="Practice"><a href="#Practice" class="headerlink" title="Practice"></a>Practice</h3><blockquote>
<p>$D &#x3D; A \times B - ( A + C \times B)$</p>
</blockquote>
<h4 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h4><blockquote>
<p>Instruction set: </p>
<ul>
<li>add, sub, mul, div, …</li>
<li>push A, pop A</li>
</ul>
</blockquote>
<ul>
<li>Answer<ol>
<li>push A</li>
<li>push B</li>
<li>mul</li>
<li>push A</li>
<li>push C</li>
<li>push B</li>
<li>mul</li>
<li>add</li>
<li>sub</li>
<li>pop D</li>
</ol>
</li>
</ul>
<h4 id="Accumulator"><a href="#Accumulator" class="headerlink" title="Accumulator"></a>Accumulator</h4><blockquote>
<p>Instruction set:</p>
<ul>
<li>add A, sub A, mult A, div A, …</li>
<li>load A, store A</li>
</ul>
</blockquote>
<ul>
<li>Answer:<ol>
<li>load C</li>
<li>mult B</li>
<li>add A</li>
<li>store D</li>
<li>load A</li>
<li>mult B</li>
<li>sub D</li>
<li>store D</li>
</ol>
</li>
</ul>
<h4 id="Memory-Memory"><a href="#Memory-Memory" class="headerlink" title="Memory-Memory"></a>Memory-Memory</h4><blockquote>
<p>Instruction set:</p>
<ul>
<li>3 operands: add A, B, C; sub A, B, C; mul A, B, C</li>
<li>2 operands:add A, B; sub A, B; mul A, B; mov A, B</li>
</ul>
</blockquote>
<ul>
<li>Answer:<ul>
<li>3 operands:<ul>
<li>mul D, A, B</li>
<li>mul E, C, B</li>
<li>add E, A, E</li>
<li>sub D, D, E</li>
</ul>
</li>
<li>2 operands:<ul>
<li>mov D, A</li>
<li>mul D, B</li>
<li>mov E, C</li>
<li>mul E, B</li>
<li>add E, A</li>
<li>sub D, E</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Register-Memory"><a href="#Register-Memory" class="headerlink" title="Register-Memory"></a>Register-Memory</h4><blockquote>
<p>Instruction set:</p>
<ul>
<li>add R1, A; sub R1, A; mul R1, B</li>
<li>load R1, A; store R1, A</li>
</ul>
</blockquote>
<ul>
<li>Answer:<ul>
<li>load R1, A</li>
<li>mul R1, B</li>
<li>load R2, C</li>
<li>mul R2, B</li>
<li>add R2, A</li>
<li>store R2, D</li>
<li>sub R1, D</li>
<li>store R1, D</li>
</ul>
</li>
</ul>
<h4 id="Load-Store"><a href="#Load-Store" class="headerlink" title="Load-Store"></a>Load-Store</h4><blockquote>
<p>Instruction set:</p>
<ul>
<li>add R1, R2, R3; sub R1, R2, R3; mul R1, R2, R3</li>
<li>load R1, &amp;A; store R1, &amp;A</li>
</ul>
</blockquote>
<ul>
<li>Answer:<ul>
<li>load R1, &amp;A</li>
<li>load R2, &amp;B</li>
<li>load R3, &amp;C</li>
<li>mul R3, R3, R2 &#x2F;&#x2F; R3 &#x3D; B*C</li>
<li>add R3, R3, R1 &#x2F;&#x2F; R3 &#x3D; A+B*C</li>
<li>mul R1, R1, R2 &#x2F;&#x2F;R1 &#x3D; A*B</li>
<li>sub R1, R1, R3 </li>
<li>store R1, D</li>
</ul>
</li>
</ul>
<h2 id="RISC-V-ISA"><a href="#RISC-V-ISA" class="headerlink" title="RISC-V ISA"></a>RISC-V ISA</h2><h3 id="Formats-of-Instruction"><a href="#Formats-of-Instruction" class="headerlink" title="Formats of Instruction"></a>Formats of Instruction</h3><blockquote>
<p>不需要记住具体哪位对应什么，需要记住R型指令是什么，I型是什么……</p>
</blockquote>
<h3 id="RISC-V-Address-Mode"><a href="#RISC-V-Address-Mode" class="headerlink" title="RISC-V Address Mode"></a>RISC-V Address Mode</h3><p>四种寻址方式</p>
<ol>
<li>立即数寻址 | Immediate addressing</li>
<li>寄存器寻址 | Register addressing</li>
<li>基寻址 | Base addressing</li>
<li>PC-relative addressing</li>
</ol>
<h3 id="Register-Operands"><a href="#Register-Operands" class="headerlink" title="Register Operands"></a>Register Operands</h3><ol>
<li><p>Arithmetic instructions use register operands</p>
</li>
<li><p>RISC-V has a 32$\times$32-bit register file</p>
</li>
<li><ol>
<li>Use for frequently accessed data</li>
<li>Numbered 0 to 31</li>
<li>32-bit data called a “word”</li>
</ol>
</li>
<li><p>Assemble names</p>
</li>
<li><ol>
<li>x0: constant 0</li>
<li>x1: link register</li>
<li>x2: stack pointer</li>
<li>x3: global pointer</li>
<li>x4: thread pointer</li>
<li>x5-x7, x28-x31: temporay</li>
<li>x8-x9, x18-x27: save</li>
<li>x10-x17: parameter &#x2F; result</li>
</ol>
</li>
</ol>
<h3 id="Memory-Operands"><a href="#Memory-Operands" class="headerlink" title="Memory Operands"></a>Memory Operands</h3><ul>
<li>Main memory used for composite data<ul>
<li>Arrays, structures, dynamic data</li>
</ul>
</li>
<li>To apply arithmetic operations<ul>
<li>Load values from memory into register</li>
<li>Store result from register to memory</li>
</ul>
</li>
<li>Memory is byte addressed<ul>
<li>Each address identifies an 8-bit byte</li>
</ul>
</li>
<li>Words are aligned in memory<ul>
<li>Address must be a multiple of 4</li>
</ul>
</li>
<li>RISC-V is Little Endian<ul>
<li>Least-significant byte at least address</li>
<li>c.f.Big Endian: most-significant byte at least adddress of a word</li>
</ul>
</li>
</ul>
<h3 id="Register-vs-Memory"><a href="#Register-vs-Memory" class="headerlink" title="Register vs. Memory"></a>Register vs. Memory</h3><ul>
<li>Register are faster to access than memory</li>
<li>Operating on memory data requires loads and stores<ul>
<li>More instructions to be executed</li>
</ul>
</li>
<li>Compiler must use registers for variables as much as possible<ul>
<li>Only spill to memory for less frequently used variables</li>
<li>Register optimization is important</li>
</ul>
</li>
</ul>
<h2 id="The-Four-ISA-Design-Principles"><a href="#The-Four-ISA-Design-Principles" class="headerlink" title="The Four ISA Design Principles"></a>The Four ISA Design Principles</h2><ol>
<li>Simplicity favors regularity</li>
<li>Smaller is faster</li>
<li>Make the common case fast</li>
</ol>
<blockquote>
<p> 例如x0是硬件0，无法改变</p>
</blockquote>
<ol start="4">
<li>Good design demands good compromises</li>
</ol>
<h1 id="Pipelining"><a href="#Pipelining" class="headerlink" title="Pipelining"></a>Pipelining</h1><h2 id="Different-modes-of-execution"><a href="#Different-modes-of-execution" class="headerlink" title="Different modes of execution"></a>Different modes of execution</h2><ul>
<li><p>Sequential execution</p>
<ul>
<li>Advantages: Simple control, saving equipment.</li>
</ul>
</li>
<li><p>Single&#x2F;Twice overlapping execution</p>
<ul>
<li>Advantages: High-usage of functional unit, the utilization rate of functional unit is improved obviously.</li>
<li>Disadvantages:<ul>
<li>Much more hardware was needed.</li>
<li>Single: the control process became complicated.</li>
<li>Twice: <ul>
<li>Separate fetch, decode, and execution components are required.</li>
<li>Conflict in access memory<ul>
<li>Instruction memory &amp; data memory</li>
<li>Instruction cache &amp; data cache (same memory): Hardware structure </li>
<li>Adding instruction buffer between memory and instruction decode unit.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>顺序执行和重叠执行在时间上的差异和计算</p>
</blockquote>
<h2 id="What-is-pipelining"><a href="#What-is-pipelining" class="headerlink" title="What is pipelining?"></a>What is pipelining?</h2><ul>
<li>Pipelining: 一条指令的进程被分成m(m&gt;2)个时间相同的子进程，且m条相邻指令的进程在同一时间内交错重叠。</li>
<li>Pipelining可以看作重叠执行(overlapping execution)的扩展；</li>
<li>流水线中的每个子进程及其功能组件叫做阶段(stages or segments of the pipeling)</li>
<li>阶段的数量叫做流水线的深度(depth)</li>
</ul>
<h2 id="Characteristics-of-pipelining"><a href="#Characteristics-of-pipelining" class="headerlink" title="Characteristics of pipelining"></a>Characteristics of pipelining</h2><ul>
<li><u>流水线寄存器</u></li>
<li>适用场景：<ul>
<li>Pipelining technology is suitable for a large number of repetitive sequential processes. Only when tasks are continuously provided at the input, te efficiency of pipelining can be brought into full play.</li>
</ul>
</li>
<li>The pipelining needs the <u>pass time</u> and the <u>empty time</u><ul>
<li><u>Pass time</u>: the time for the first task from beginning(entering the pipelining) to ending.</li>
<li><u>Empty time</u>: the time for the last task entering the pipelining to have the result.</li>
</ul>
</li>
</ul>
<h2 id="Classes-of-pipelining"><a href="#Classes-of-pipelining" class="headerlink" title="Classes of pipelining"></a>Classes of pipelining</h2><ul>
<li>第一类分类方式：<ul>
<li><u>Single function pipelining | 单功能</u>: only one fixed function pipelining.<ul>
<li><u>Multi function pipelining | 多功能</u>: each section of the pipelining can be connected differently for several different functions.<ul>
<li><u>Static pipelining</u>: 静态在同一的时间段内，只能按同一功能连接（如：必须先把加法做完，才可以做乘法）<ul>
<li>For static pipelining, only the input is a series of teh same operation tasks, the efficiency of pipelining can be brought into full play.</li>
</ul>
</li>
<li><u>Dynamic pipelining</u>: 动态在同一时间段内，不同功能可以连接（如：在做加法的时候可以插入乘法）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052228662.png" alt="img"></p>
<ul>
<li>第二类分类方式：<ul>
<li><u>Component level pipelining(in component-operation pipelining</u>:</li>
<li><u>Processor level pipelining(inter component-instructino pipelining)</u>:</li>
<li>Inter processor pipelining(inter processor-macro pipelining):</li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052228847.png" alt="img"></p>
<ul>
<li><p>第三类分类方式：线性和非线性</p>
<ul>
<li><p><u>Linear pipelinin</u></p>
</li>
<li><p><u>Nonlinear pipelining</u></p>
<ul>
<li>存在一种基于表的调度，满足一定顺序才能实现某种功能</li>
</ul>
<blockquote>
<p>非线性流水线调度问题</p>
</blockquote>
<ul>
<li><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052230432.png" alt="img"></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052229786.png" alt="img"></p>
<ul>
<li>第四类分类<ul>
<li><u>Ordered pipelining</u></li>
<li><u>Disordered pipelining</u></li>
</ul>
</li>
</ul>
<blockquote>
</blockquote>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052231089.png" alt="img"></p>
<ul>
<li>第五类分类<ul>
<li><u>Scalar processor</u></li>
<li><u>Vector pipelining processor</u></li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052232465.png" alt="img"></p>
<h2 id="Pipeline-Performance"><a href="#Pipeline-Performance" class="headerlink" title="Pipeline Performance"></a>Pipeline Performance</h2><h3 id="Throughput-TP-吞吐量"><a href="#Throughput-TP-吞吐量" class="headerlink" title="Throughput(TP) | 吞吐量"></a>Throughput(TP) | 吞吐量</h3><h3 id="Speedup-SP-加速比"><a href="#Speedup-SP-加速比" class="headerlink" title="Speedup(SP) | 加速比"></a>Speedup(SP) | 加速比</h3><h3 id="Efficiency-eta-效率"><a href="#Efficiency-eta-效率" class="headerlink" title="Efficiency($\eta$) | 效率"></a>Efficiency($\eta$) | 效率</h3><h2 id="RISC-V-Pipelining"><a href="#RISC-V-Pipelining" class="headerlink" title="RISC-V Pipelining"></a>RISC-V Pipelining</h2><ul>
<li>Five stages, one step per stage</li>
</ul>
<ol>
<li>IF: 取指，取出 I-Mem 中 PC 地址处的指令</li>
<li>ID: 译码，将指令解码为控制信号，并读取寄存器值</li>
<li>EX: 执行，执行 ALU 操作</li>
<li>MEM: 访存，访问 D-Mem 进行写入或读取</li>
<li>WB: 写回，将结果写回寄存器文件</li>
</ol>
<h3 id="Pipelining-and-ISA-Design"><a href="#Pipelining-and-ISA-Design" class="headerlink" title="Pipelining and ISA Design"></a>Pipelining and ISA Design</h3><ul>
<li><p>RISC-V ISA designed for pipelining</p>
<ul>
<li><p>指令长度固定为 32 位，易于在一个周期内进行取指或译码</p>
</li>
<li><p>指令格式少且规整，易于在一个周期内译码、读取寄存器</p>
</li>
<li><p>使用 load&#x2F;store 寻址结构，一个周期计算地址、一个周期访存</p>
</li>
<li><p>访存操作都是对齐的，可以在一个周期内进行</p>
</li>
</ul>
</li>
</ul>
<h3 id="An-Implementation-of-Pipelining"><a href="#An-Implementation-of-Pipelining" class="headerlink" title="An Implementation of Pipelining"></a>An Implementation of Pipelining</h3><ul>
<li>添加阶段寄存器（pipeline register）来分隔每个阶段：IF&#x2F;ID、ID&#x2F;EX、EX&#x2F;MEM、MEM&#x2F;WB<ul>
<li>这四个阶段寄存器和 PC 寄存器一起将流水线分为了五个部分</li>
<li>可以<strong>看作</strong>只有这五个时序电路，其它内部操作都是组合逻辑，在内部运行</li>
<li>五个寄存器在上升沿进行更新，阶段寄存器进行流转，记录当前指令需要的信息</li>
</ul>
</li>
<li>数据通路中有两个回路<ul>
<li>MEM 阶段计算分支结果，输出给 PC。可能会引起控制冒险</li>
<li>WB 阶段写回寄存器，可能会引起数据冒险</li>
</ul>
</li>
<li>ID 和 WB 阶段同时使用寄存器组文件，但不会产生结构冒险，因为 ID 阶段只读取寄存器，WB 阶段只写入寄存器，相当于分为了两个部分</li>
</ul>
<h2 id="How-Pipelining-Improves-Performance"><a href="#How-Pipelining-Improves-Performance" class="headerlink" title="How Pipelining Improves Performance"></a>How Pipelining Improves Performance</h2><ul>
<li>Decreasing the execution time of an individual instruction	:heavy_multiplication_x:</li>
<li>Increasing instruction throughput						     :heavy_check_mark:</li>
</ul>
<h3 id="The-Pipelined-Version-of-the-Datapath"><a href="#The-Pipelined-Version-of-the-Datapath" class="headerlink" title="The Pipelined Version of the Datapath"></a>The Pipelined Version of the Datapath</h3><p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052323066.png" alt="image-20230105232315849"></p>
<ul>
<li>几种呈现方式：</li>
</ul>
<blockquote>
<p>了解即可，考试不会要求绘画</p>
</blockquote>
<ul>
<li>Multiple-Clock-Cycle Pipeline Diagram of five Instructions</li>
</ul>
<p>​	<img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052324443.png" alt="image-20230105232423375"></p>
<ul>
<li>Traditional Multiple-Clock-Cycle Pipeline Diagram</li>
</ul>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052326835.png" alt="image-20230105232653764"></p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301052327819.png" alt="image-20230105232705734"></p>
<h2 id="Pipeline-Hazards"><a href="#Pipeline-Hazards" class="headerlink" title="Pipeline Hazards"></a>Pipeline Hazards</h2><ul>
<li><p>Structural Hazard</p>
<ul>
<li><p>A required resource is busy</p>
</li>
<li><p>Solution:</p>
<ol>
<li>Instructions take it in turns use resource, some instruction have to stall</li>
<li>Add more hardware to machine</li>
</ol>
<blockquote>
<p>Can always solve by adding more hardware</p>
</blockquote>
</li>
</ul>
</li>
<li><p>Data Hazards</p>
<ul>
<li><p>Data dependency between instructions</p>
</li>
<li><p>Need to wait for previous instruction to complete its data read&#x2F;write</p>
</li>
<li><p>Solution:</p>
<ul>
<li><p><u>Forwarding | 前递</u>: Adding extra hardware to retrieve the missing item early from the internall resources</p>
<ul>
<li>Forwarding Conditions:</li>
</ul>
<p>	</p>
<table>
<thead>
<tr>
<th>Mux Control</th>
<th>Source</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td>ForwardA &#x3D; 00</td>
<td>ID&#x2F;EX</td>
<td>The first ALU operand comes from the register</td>
</tr>
<tr>
<td>FA &#x3D; 10</td>
<td>EX&#x2F;MEM</td>
<td>~ comes from the prior ALU result</td>
</tr>
<tr>
<td>FA &#x3D; 01</td>
<td>MEM&#x2F;WB</td>
<td>~ comes from data memory or an earlier ALU result</td>
</tr>
<tr>
<td>FB &#x3D; 00</td>
<td>ID&#x2F;EX</td>
<td>The second ALU operand ~</td>
</tr>
<tr>
<td>FB &#x3D; 10</td>
<td>EX&#x2F;MEM</td>
<td>~ ~</td>
</tr>
<tr>
<td>FB &#x3D; 01</td>
<td>MEM&#x2F;WB</td>
<td>~ ~</td>
</tr>
</tbody></table>
</li>
<li><p><u>Stall | 暂停</u>: </p>
<ul>
<li>对于 Load-Use Data Hazard<ul>
<li>在 ID 阶段就进行探测 load-use 冒险<ul>
<li>ID&#x2F;EX.MemRead &#x3D;&#x3D; 1 (ID&#x2F;EX.MemWrite &#x3D;&#x3D; 0)</li>
<li>ID&#x2F;EX.Rd &#x3D;&#x3D; IF&#x2F;ID.Rs1 或 IF&#x2F;ID.Rs2</li>
</ul>
</li>
<li>暂停流水线：<ul>
<li>强制 ID&#x2F;EX 阶段寄存器中的控制信号变为 0（相当于插入一条 nop）</li>
<li>阻止 PC 寄存器和 IF&#x2F;ID 阶段寄存器更新</li>
</ul>
</li>
<li>在暂停一个周期后就可以按照 MEM hazard 进行前递解决</li>
</ul>
</li>
</ul>
</li>
<li><p>DataPath with Hazard Detection</p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061046617.png" alt="image-20230106104626574"></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Control Hazards</p>
<ul>
<li>Flow of execution depends on previous instruction</li>
<li>Branch determines flow of control<ul>
<li>Fetching next instruction depends on branch outcome</li>
<li>Pipelining can’t always fetch correct instruction<ul>
<li>Still working on ID stage of branch</li>
</ul>
</li>
</ul>
</li>
<li>In RISC-V pipelining<ul>
<li>Need to <u>compare registers</u> and <u>compute target</u> early in the pipelining</li>
<li>Add hardware to do it in ID stage</li>
</ul>
</li>
<li>How to Reduce Branch Delay<ul>
<li>Key processes in branch instructions<ul>
<li>Compute the branch target address</li>
<li>Judge if the branch success</li>
</ul>
</li>
<li>Move hardware to determine outcome to ID stage<ul>
<li>Target adddress adder</li>
<li>Register comparator</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Code-Scheduling"><a href="#Code-Scheduling" class="headerlink" title="Code Scheduling"></a>Code Scheduling</h3><blockquote>
<p>分支延迟槽，来避免一些冲突(MIPs常使用)</p>
</blockquote>
<ul>
<li><p>Scheduling from former</p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061120227.png" alt="image-20230106112002200"></p>
</li>
<li><p>Scheduling from object</p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061120850.png" alt="image-20230106112015814"></p>
</li>
<li><p>Scheduling from failure</p>
</li>
</ul>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061120242.png" alt="image-20230106112031206"></p>
<h3 id="Data-Hazards-for-Branches"><a href="#Data-Hazards-for-Branches" class="headerlink" title="Data Hazards for Branches"></a>Data Hazards for Branches</h3><ul>
<li><p>If a comparsion register is destination of 2^nd^ or 3^rd^ preceding ALU instruction</p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061128286.png" alt="image-20230106112850251"></p>
<ul>
<li>Can resolve using forwarding</li>
</ul>
</li>
<li><p>If a comparsion register is a destination of preceding ALU instruction or 2^nd^ preceding load instruction</p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061129264.png" alt="image-20230106112902225"></p>
<ul>
<li>Need 1 stall cycle</li>
</ul>
</li>
<li><p>If a comparsion register is a destination of immediately preceding load instruction</p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061129399.png" alt="image-20230106112912360"></p>
<ul>
<li>Need 2 stall cycles</li>
</ul>
</li>
</ul>
<h3 id="Dynamic-Branch-Prediction"><a href="#Dynamic-Branch-Prediction" class="headerlink" title="Dynamic Branch Prediction"></a>Dynamic Branch Prediction</h3><ul>
<li><p>In deeper and superscalar pipelines, branch penalty is more significant</p>
</li>
<li><p>Use dynamic prediction</p>
<ul>
<li><p>Branch prediction buffer (aka branch history table | 分支历史表)</p>
</li>
<li><p>Indexed by recent branch instruction addresses | 表头是最近的分支指令的地址</p>
</li>
<li><p>Stores outcome (taken&#x2F;not taken) | 表的内容是是否跳转</p>
</li>
<li><p>To execute a branch</p>
<ul>
<li><p>Check table, expect the same outcome</p>
</li>
<li><p>Start fetching from fall-through or target</p>
</li>
<li><p>If wrong, flush pipeline and flip prediction</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061135780.png" alt="image-20230106113510751"></p>
</li>
</ul>
<h4 id="1-Bit-Predictor-Shortcoming"><a href="#1-Bit-Predictor-Shortcoming" class="headerlink" title="1-Bit Predictor: Shortcoming"></a>1-Bit Predictor: Shortcoming</h4><ul>
<li><p>Inner loop branches mispredicted twice! | 内循环结束和再次进入的时候有两个误预判</p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061136163.png" alt="image-20230106113619139"></p>
<ul>
<li><p>Mispredict as taken on last iteration of inner loop</p>
</li>
<li><p>Then mispredict as not taken on first iteration of inner loop next time around</p>
<blockquote>
<p>为解决这个问题，引入两位的预测器</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h4 id="2-Bit-Predictor"><a href="#2-Bit-Predictor" class="headerlink" title="2-Bit Predictor"></a>2-Bit Predictor</h4><ul>
<li><p>Only change prediction on two successive mispredictions</p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061139665.png" alt="image-20230106113949627"></p>
</li>
</ul>
<blockquote>
<p>有限状态机</p>
</blockquote>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061145267.png" alt="image-20230106114527240"></p>
<h2 id="Instruction-Level-Parallelism-ILP"><a href="#Instruction-Level-Parallelism-ILP" class="headerlink" title="Instruction-Level Parallelism(ILP)"></a>Instruction-Level Parallelism(ILP)</h2><blockquote>
<p>多发射,在一个时钟周期发射多条指令，同步执行</p>
</blockquote>
<ul>
<li>Pipelining: executing multiple instructions in parallel</li>
<li>To increase ILP<ul>
<li>Deeper pipeline<ul>
<li>Less work per stage -&gt; shorter clock cycle</li>
</ul>
</li>
<li>Multiple issue<ul>
<li>Replicate pipeline stages -&gt; multiple pipelines</li>
<li>Start multiple instructions per clock cycle</li>
<li>CPI &lt; 1, so use Instructions Per Cycle(IPC)</li>
<li>E.g., 4GHz 4-way multiple-issue<ul>
<li>16 BIPS, peak CPI &#x3D; 0.25, peak IPC &#x3D; 4</li>
</ul>
</li>
<li>But dependencies reduce this in pratice</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Multiple-Issus"><a href="#Multiple-Issus" class="headerlink" title="Multiple Issus"></a>Multiple Issus</h2><ul>
<li><p>Static multiple issue | 静态多发射</p>
<blockquote>
<p>由软件（编译器）决定哪些指令发射出去</p>
</blockquote>
<ul>
<li>Compiler groups instructions to be issued together</li>
<li>Packages them into “issue slots（发射槽）”</li>
<li>Compiler detects and avoids hazards</li>
</ul>
</li>
<li><p>Dynamic multiple issue</p>
<ul>
<li>CPU examines instruction stream and chooses instructions to issue each cycle</li>
<li>Compiler can help by recordering instructions</li>
<li>CPU resolves hazards suing advanced techniques at run time</li>
</ul>
</li>
</ul>
<h3 id="Two-types-of-multiple-issue-processor"><a href="#Two-types-of-multiple-issue-processor" class="headerlink" title="Two types of multiple-issue processor"></a>Two types of multiple-issue processor</h3><ul>
<li>和多发射基本相同，但每次发射的条数是不固定的</li>
</ul>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061242167.png" alt="image-20230106124205123"></p>
<ul>
<li>超长指令字 | 静多发射——定发射条数，由CPU管理</li>
</ul>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061242352.png" alt="image-20230106124240304"></p>
<h2 id="Comparison"><a href="#Comparison" class="headerlink" title="Comparison"></a>Comparison</h2><p> <img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061329959.png" alt="image-20230106132928922"></p>
<h2 id="Scheduling"><a href="#Scheduling" class="headerlink" title="Scheduling"></a>Scheduling</h2><h3 id="Static-Multiple-Issue"><a href="#Static-Multiple-Issue" class="headerlink" title="Static Multiple Issue"></a>Static Multiple Issue</h3><ul>
<li>Compiler must remove some&#x2F;all hazards	<ul>
<li>Recorder instructions inti issue packeys</li>
<li>No dependencies with a packet</li>
<li>Possibly some dependecies between packets<ul>
<li>Varies between ISAs; compiler must konw!</li>
</ul>
</li>
<li>Pad with nop if necessary</li>
</ul>
</li>
</ul>
<h3 id="Dynamic-Multiple-Issue"><a href="#Dynamic-Multiple-Issue" class="headerlink" title="Dynamic Multiple Issue"></a>Dynamic Multiple Issue</h3><p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061332877.png" alt="image-20230106133217838"></p>
<blockquote>
<p><u>一些性质</u></p>
</blockquote>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061332809.png" alt="image-20230106133247771"></p>
<p><img src="https://gitee.com/enl-z/typora_-images/raw/master/202301061333518.png" alt="image-20230106133352475"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://enl-z.github.io">Enl_Z</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://enl-z.github.io/2023/01/06/%E6%9C%9F%E6%9C%AB/">http://enl-z.github.io/2023/01/06/%E6%9C%9F%E6%9C%AB/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://od.lk/s/NjZfNDIyNzE0MTVf/jhk-1659446298147.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> Donate</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://od.lk/s/NjZfNDIyNzA3NDZf/dfb485e806eba514c603be51996beee.jpg" target="_blank"><img class="post-qr-code-img" src="https://od.lk/s/NjZfNDIyNzA3NDZf/dfb485e806eba514c603be51996beee.jpg"/></a><div class="post-qr-code-desc"></div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src="/null" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2022/11/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80%20_%20FDS/"><img class="next-cover" src="https://od.lk/s/NjZfNDI4MjQ4ODZf/1667476417832-4efefdc9-9d7c-476d-a8e4-807fca1c35ef.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">数据结构基础 | FDS</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81NjkzMy8zMzM5Nw=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2022/08/02/MpuXm1wTiZ5J9Nv.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Enl_Z</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/enl-z"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/enl-z" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:EZhao1997@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ISA"><span class="toc-number">1.</span> <span class="toc-text">ISA</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-Improve-the-CPU"><span class="toc-number">1.1.</span> <span class="toc-text">How to Improve the CPU</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ISA-Classification-Basis"><span class="toc-number">1.2.</span> <span class="toc-text">ISA Classification Basis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ISA-Classes"><span class="toc-number">1.2.1.</span> <span class="toc-text">ISA Classes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stack-Architecture"><span class="toc-number">1.2.2.</span> <span class="toc-text">Stack Architecture</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Accumulator-Architecture"><span class="toc-number">1.2.3.</span> <span class="toc-text">Accumulator Architecture</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GPR-Arthitecture"><span class="toc-number">1.2.4.</span> <span class="toc-text">GPR Arthitecture</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GPR-Register-Memory-Arch"><span class="toc-number">1.2.5.</span> <span class="toc-text">GPR: Register-Memory Arch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GPR-Load-Store-Architecture"><span class="toc-number">1.2.6.</span> <span class="toc-text">GPR: Load-Store Architecture</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Practice"><span class="toc-number">1.2.7.</span> <span class="toc-text">Practice</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Stack"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">Stack</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Accumulator"><span class="toc-number">1.2.7.2.</span> <span class="toc-text">Accumulator</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Memory-Memory"><span class="toc-number">1.2.7.3.</span> <span class="toc-text">Memory-Memory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Register-Memory"><span class="toc-number">1.2.7.4.</span> <span class="toc-text">Register-Memory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Load-Store"><span class="toc-number">1.2.7.5.</span> <span class="toc-text">Load-Store</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RISC-V-ISA"><span class="toc-number">1.3.</span> <span class="toc-text">RISC-V ISA</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Formats-of-Instruction"><span class="toc-number">1.3.1.</span> <span class="toc-text">Formats of Instruction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RISC-V-Address-Mode"><span class="toc-number">1.3.2.</span> <span class="toc-text">RISC-V Address Mode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Register-Operands"><span class="toc-number">1.3.3.</span> <span class="toc-text">Register Operands</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Memory-Operands"><span class="toc-number">1.3.4.</span> <span class="toc-text">Memory Operands</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Register-vs-Memory"><span class="toc-number">1.3.5.</span> <span class="toc-text">Register vs. Memory</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Four-ISA-Design-Principles"><span class="toc-number">1.4.</span> <span class="toc-text">The Four ISA Design Principles</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Pipelining"><span class="toc-number">2.</span> <span class="toc-text">Pipelining</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Different-modes-of-execution"><span class="toc-number">2.1.</span> <span class="toc-text">Different modes of execution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-pipelining"><span class="toc-number">2.2.</span> <span class="toc-text">What is pipelining?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Characteristics-of-pipelining"><span class="toc-number">2.3.</span> <span class="toc-text">Characteristics of pipelining</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Classes-of-pipelining"><span class="toc-number">2.4.</span> <span class="toc-text">Classes of pipelining</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pipeline-Performance"><span class="toc-number">2.5.</span> <span class="toc-text">Pipeline Performance</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Throughput-TP-%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">2.5.1.</span> <span class="toc-text">Throughput(TP) | 吞吐量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Speedup-SP-%E5%8A%A0%E9%80%9F%E6%AF%94"><span class="toc-number">2.5.2.</span> <span class="toc-text">Speedup(SP) | 加速比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Efficiency-eta-%E6%95%88%E7%8E%87"><span class="toc-number">2.5.3.</span> <span class="toc-text">Efficiency($\eta$) | 效率</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RISC-V-Pipelining"><span class="toc-number">2.6.</span> <span class="toc-text">RISC-V Pipelining</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Pipelining-and-ISA-Design"><span class="toc-number">2.6.1.</span> <span class="toc-text">Pipelining and ISA Design</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#An-Implementation-of-Pipelining"><span class="toc-number">2.6.2.</span> <span class="toc-text">An Implementation of Pipelining</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-Pipelining-Improves-Performance"><span class="toc-number">2.7.</span> <span class="toc-text">How Pipelining Improves Performance</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#The-Pipelined-Version-of-the-Datapath"><span class="toc-number">2.7.1.</span> <span class="toc-text">The Pipelined Version of the Datapath</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pipeline-Hazards"><span class="toc-number">2.8.</span> <span class="toc-text">Pipeline Hazards</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Code-Scheduling"><span class="toc-number">2.8.1.</span> <span class="toc-text">Code Scheduling</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Data-Hazards-for-Branches"><span class="toc-number">2.8.2.</span> <span class="toc-text">Data Hazards for Branches</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dynamic-Branch-Prediction"><span class="toc-number">2.8.3.</span> <span class="toc-text">Dynamic Branch Prediction</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Bit-Predictor-Shortcoming"><span class="toc-number">2.8.3.1.</span> <span class="toc-text">1-Bit Predictor: Shortcoming</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Bit-Predictor"><span class="toc-number">2.8.3.2.</span> <span class="toc-text">2-Bit Predictor</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Instruction-Level-Parallelism-ILP"><span class="toc-number">2.9.</span> <span class="toc-text">Instruction-Level Parallelism(ILP)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Multiple-Issus"><span class="toc-number">2.10.</span> <span class="toc-text">Multiple Issus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Two-types-of-multiple-issue-processor"><span class="toc-number">2.10.1.</span> <span class="toc-text">Two types of multiple-issue processor</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Comparison"><span class="toc-number">2.11.</span> <span class="toc-text">Comparison</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scheduling"><span class="toc-number">2.12.</span> <span class="toc-text">Scheduling</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Static-Multiple-Issue"><span class="toc-number">2.12.1.</span> <span class="toc-text">Static Multiple Issue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dynamic-Multiple-Issue"><span class="toc-number">2.12.2.</span> <span class="toc-text">Dynamic Multiple Issue</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/01/06/%E6%9C%9F%E6%9C%AB/" title="计组部分期末"><img src="https://od.lk/s/NjZfNDIyNzE0MTVf/jhk-1659446298147.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计组部分期末"/></a><div class="content"><a class="title" href="/2023/01/06/%E6%9C%9F%E6%9C%AB/" title="计组部分期末">计组部分期末</a><time datetime="2023-01-06T09:55:31.119Z" title="Created 2023-01-06 17:55:31">2023-01-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80%20_%20FDS/" title="数据结构基础 | FDS"><img src="https://od.lk/s/NjZfNDI4MjQ4ODZf/1667476417832-4efefdc9-9d7c-476d-a8e4-807fca1c35ef.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据结构基础 | FDS"/></a><div class="content"><a class="title" href="/2022/11/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80%20_%20FDS/" title="数据结构基础 | FDS">数据结构基础 | FDS</a><time datetime="2022-11-03T11:43:00.000Z" title="Created 2022-11-03 19:43:00">2022-11-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/02/%E5%A4%A7%E4%B8%80%E4%B8%8B/" title="大一下"><img src="https://od.lk/s/NjZfNDIyNzE0MTVf/jhk-1659446298147.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大一下"/></a><div class="content"><a class="title" href="/2022/08/02/%E5%A4%A7%E4%B8%80%E4%B8%8B/" title="大一下">大一下</a><time datetime="2022-08-02T13:27:00.000Z" title="Created 2022-08-02 21:27:00">2022-08-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/08/02/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%86%B3%E5%AE%9A%E5%81%9A%E8%BF%99%E4%B8%AA%E7%BD%91%E9%A1%B5/" title="为什么决定做这个网页"><img src="https://s2.loli.net/2022/08/02/sRtfpBAZPb7Xdxa.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="为什么决定做这个网页"/></a><div class="content"><a class="title" href="/2022/08/02/%E4%B8%BA%E4%BB%80%E4%B9%88%E5%86%B3%E5%AE%9A%E5%81%9A%E8%BF%99%E4%B8%AA%E7%BD%91%E9%A1%B5/" title="为什么决定做这个网页">为什么决定做这个网页</a><time datetime="2022-08-02T01:00:00.000Z" title="Created 2022-08-02 09:00:00">2022-08-02</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Enl_Z</div><div class="footer_custom_text">This web is for <a href="https://enl-z.github.io/">everyone</a>👀!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="Chat"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !true) {
  if (true) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="//code.tidio.co/djfbavomigdswrbbyyv5mb7owa8lkzrd.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>